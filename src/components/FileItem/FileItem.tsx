import { FC, HTMLAttributes, useState } from 'react'
import classes from './FileItem.module.scss'
import clsx from 'clsx'
import { getTabIndex } from '@/utils/getTabIndex'

export enum EFileItemExtension {
	word = 'word',
	xlsx = 'xlsx',
	zip = 'zip',
	rar = 'rar',
	txt = 'txt',
	file = 'file',
}

export interface IFileItem extends HTMLAttributes<HTMLDivElement> {
	extension: string
	name: string
}

export const FileItem: FC<IFileItem> = ({
	className,
	extension,
	name,
	...props
}) => {
	const [isTextFocused, setIsTextFocused] = useState<boolean>(false)

	function textFocusHandler() {
		setIsTextFocused(true)
	}

	function textBlurHandler() {
		setIsTextFocused(false)
	}

	const styles = clsx([classes.wrapper, className])

	const textStyles = clsx([
		classes.name,
		!isTextFocused && classes.textEllipsis,
	])
	return (
		<div className={styles} {...props}>
			{(() => {
				if (extension === EFileItemExtension.word) {
					return (
						<svg viewBox="0 0 50 67">
							<path d="M10.4648 38L9.42773 29.4688H10.459L11.0742 35.3516L11.1094 35.6914L11.1738 35.3398L12.2051 29.4688H13.1484L14.1855 35.3457L14.25 35.6914L14.2852 35.3398L14.9004 29.4688H15.9258L14.8887 38H13.7812L12.7441 31.9297L12.6855 31.5723L12.6211 31.9355L11.5781 38H10.4648ZM23.9754 34.2266C23.9715 34.5312 23.9441 34.8398 23.8934 35.1523C23.8465 35.4609 23.7723 35.7598 23.6707 36.0488C23.5691 36.3379 23.4383 36.6074 23.2781 36.8574C23.1219 37.1074 22.9344 37.3262 22.7156 37.5137C22.4969 37.7012 22.2449 37.8496 21.9598 37.959C21.6785 38.0645 21.3621 38.1172 21.0105 38.1172C20.659 38.1172 20.3406 38.0645 20.0555 37.959C19.7742 37.8496 19.5242 37.7012 19.3055 37.5137C19.0867 37.3262 18.8973 37.1074 18.7371 36.8574C18.577 36.6035 18.4461 36.332 18.3445 36.043C18.2391 35.7539 18.1609 35.4551 18.1102 35.1465C18.0594 34.8379 18.032 34.5312 18.0281 34.2266V33.2539C18.032 32.9492 18.0574 32.6426 18.1043 32.334C18.1551 32.0215 18.2332 31.7207 18.3387 31.4316C18.4402 31.1426 18.5691 30.873 18.7254 30.623C18.8855 30.3691 19.075 30.1465 19.2937 29.9551C19.5125 29.7676 19.7625 29.6211 20.0437 29.5156C20.3289 29.4062 20.6473 29.3516 20.9988 29.3516C21.3504 29.3516 21.6687 29.4062 21.9539 29.5156C22.2391 29.6211 22.491 29.7676 22.7098 29.9551C22.9285 30.1426 23.116 30.3633 23.2723 30.6172C23.4324 30.8672 23.5652 31.1367 23.6707 31.4258C23.7723 31.7148 23.8465 32.0156 23.8934 32.3281C23.9441 32.6406 23.9715 32.9492 23.9754 33.2539V34.2266ZM22.9031 33.2422C22.8992 33.0391 22.8855 32.8281 22.8621 32.6094C22.8387 32.3867 22.7996 32.166 22.7449 31.9473C22.6863 31.7324 22.6102 31.5273 22.5164 31.332C22.4227 31.1328 22.3055 30.957 22.1648 30.8047C22.0242 30.6562 21.8582 30.5391 21.6668 30.4531C21.4754 30.3633 21.2527 30.3184 20.9988 30.3184C20.7488 30.3184 20.5281 30.3633 20.3367 30.4531C20.1453 30.543 19.9793 30.6621 19.8387 30.8105C19.698 30.9629 19.5809 31.1387 19.4871 31.3379C19.3934 31.5332 19.3191 31.7383 19.2645 31.9531C19.2059 32.1719 19.1629 32.3926 19.1355 32.6152C19.1121 32.834 19.0984 33.043 19.0945 33.2422V34.2266C19.0984 34.4258 19.1121 34.6367 19.1355 34.8594C19.1629 35.082 19.2059 35.3008 19.2645 35.5156C19.323 35.7344 19.3992 35.9434 19.493 36.1426C19.5867 36.3418 19.7039 36.5156 19.8445 36.6641C19.9852 36.8164 20.1512 36.9375 20.3426 37.0273C20.534 37.1172 20.7566 37.1621 21.0105 37.1621C21.2645 37.1621 21.4871 37.1172 21.6785 37.0273C21.8738 36.9375 22.0418 36.8164 22.1824 36.6641C22.3191 36.5156 22.4324 36.3438 22.5223 36.1484C22.616 35.9492 22.6922 35.7402 22.7508 35.5215C22.8055 35.3066 22.8426 35.0879 22.8621 34.8652C22.8855 34.6426 22.8992 34.4297 22.9031 34.2266V33.2422ZM29.6578 34.5195H27.9527V38H26.8746V29.4688H29.3766C29.775 29.4766 30.15 29.5332 30.5016 29.6387C30.8531 29.7441 31.1617 29.9023 31.4273 30.1133C31.6891 30.3242 31.8941 30.5898 32.0426 30.9102C32.1949 31.2266 32.2711 31.5996 32.2711 32.0293C32.2711 32.3066 32.2301 32.5605 32.148 32.791C32.0699 33.0215 31.9605 33.2305 31.8199 33.418C31.6793 33.6055 31.5113 33.7715 31.316 33.916C31.1207 34.0605 30.9059 34.1836 30.6715 34.2852L32.482 37.9297L32.4762 38H31.3336L29.6578 34.5195ZM27.9527 33.6289H29.4059C29.648 33.625 29.8766 33.5879 30.0914 33.5176C30.3062 33.4434 30.4957 33.3379 30.6598 33.2012C30.8199 33.0645 30.9469 32.8984 31.0406 32.7031C31.1344 32.5039 31.1812 32.2754 31.1812 32.0176C31.1812 31.7441 31.1363 31.5059 31.0465 31.3027C30.9566 31.0957 30.8316 30.9219 30.6715 30.7812C30.5113 30.6445 30.3199 30.541 30.0973 30.4707C29.8785 30.4004 29.6383 30.3633 29.3766 30.3594H27.9527V33.6289ZM35.1293 38V29.4688H37.1039C37.4359 29.4727 37.7484 29.5078 38.0414 29.5742C38.3383 29.6367 38.6117 29.7266 38.8617 29.8438C39.2094 30.0039 39.516 30.2148 39.7816 30.4766C40.0512 30.7344 40.266 31.0332 40.4262 31.373C40.5707 31.6621 40.6801 31.9785 40.7543 32.3223C40.8324 32.666 40.8734 33.0332 40.8773 33.4238V34.0508C40.8773 34.4258 40.8402 34.7812 40.766 35.1172C40.6957 35.4531 40.5922 35.7617 40.4555 36.043C40.3148 36.3359 40.1371 36.6016 39.9223 36.8398C39.7074 37.0781 39.4672 37.2812 39.2016 37.4492C38.9203 37.625 38.602 37.7598 38.2465 37.8535C37.8949 37.9473 37.5141 37.9961 37.1039 38H35.1293ZM36.2309 30.3594V37.1152H37.1039C37.4164 37.1113 37.6996 37.0723 37.9535 36.998C38.2113 36.9238 38.4398 36.8184 38.6391 36.6816C38.85 36.541 39.0316 36.3691 39.184 36.166C39.3402 35.959 39.4633 35.7285 39.5531 35.4746C39.6313 35.2676 39.6898 35.0449 39.7289 34.8066C39.768 34.5645 39.7895 34.3125 39.7934 34.0508V33.4121C39.7895 33.1465 39.766 32.8926 39.723 32.6504C39.684 32.4043 39.6234 32.1758 39.5414 31.9648C39.4359 31.6914 39.2934 31.4453 39.1137 31.2266C38.9379 31.0039 38.7211 30.8242 38.4633 30.6875C38.2797 30.5859 38.0746 30.5078 37.848 30.4531C37.6215 30.3945 37.3734 30.3633 37.1039 30.3594H36.2309Z" />
							<rect x="0.5" y="0.5" width="49" height="65.1538" rx="3.5" />
						</svg>
					)
				} else if (extension === EFileItemExtension.xlsx) {
					return (
						<svg viewBox="0 0 50 67">
							<path d="M12.6621 32.8145L14.502 29.4688H15.7793L13.3008 33.6992L15.8379 38H14.5723L12.6855 34.5898L10.793 38H9.50977L12.0527 33.6992L9.57422 29.4688H10.8457L12.6621 32.8145ZM19.6512 37.0801H23.823V38H18.5672V29.4688H19.6512V37.0801ZM31.2984 35.8438C31.2984 35.582 31.2379 35.3613 31.1168 35.1816C30.9996 35.002 30.8473 34.8496 30.6598 34.7246C30.4723 34.6035 30.2652 34.502 30.0387 34.4199C29.816 34.3379 29.6012 34.2637 29.3941 34.1973C29.0934 34.0996 28.7867 33.9824 28.4742 33.8457C28.1656 33.7051 27.8844 33.5371 27.6305 33.3418C27.3727 33.1426 27.1617 32.9082 26.9977 32.6387C26.8375 32.3652 26.7574 32.0449 26.7574 31.6777C26.7574 31.3105 26.8375 30.9824 26.9977 30.6934C27.1617 30.4043 27.3746 30.1602 27.6363 29.9609C27.898 29.7617 28.1949 29.6113 28.527 29.5098C28.859 29.4043 29.193 29.3516 29.5289 29.3516C29.9 29.3516 30.2574 29.4141 30.6012 29.5391C30.9449 29.6602 31.2496 29.832 31.5152 30.0547C31.7809 30.2773 31.9937 30.5469 32.1539 30.8633C32.3141 31.1797 32.398 31.5332 32.4059 31.9238H31.2926C31.2613 31.6777 31.2008 31.4551 31.1109 31.2559C31.0211 31.0527 30.902 30.8789 30.7535 30.7344C30.6051 30.5898 30.4273 30.4785 30.2203 30.4004C30.0172 30.3184 29.7867 30.2773 29.5289 30.2773C29.3219 30.2773 29.1187 30.3066 28.9195 30.3652C28.7242 30.4238 28.5504 30.5117 28.398 30.6289C28.2418 30.7461 28.1168 30.8906 28.023 31.0625C27.9332 31.2344 27.8883 31.4336 27.8883 31.6602C27.8922 31.9062 27.9547 32.1152 28.0758 32.2871C28.1969 32.4551 28.3512 32.5977 28.5387 32.7148C28.7223 32.832 28.9215 32.9297 29.1363 33.0078C29.3551 33.0859 29.5602 33.1543 29.7516 33.2129C30.068 33.3105 30.3844 33.4297 30.7008 33.5703C31.0172 33.707 31.3062 33.8828 31.568 34.0977C31.8258 34.2969 32.0328 34.541 32.1891 34.8301C32.3492 35.1191 32.4293 35.4531 32.4293 35.832C32.4293 36.2148 32.3434 36.5488 32.1715 36.834C32.0035 37.1191 31.7848 37.3555 31.5152 37.543C31.2457 37.7344 30.941 37.8789 30.6012 37.9766C30.2613 38.0703 29.9215 38.1172 29.5816 38.1172C29.1754 38.1172 28.775 38.0488 28.3805 37.9121C27.9898 37.7754 27.65 37.5781 27.3609 37.3203C27.1031 37.0977 26.898 36.8379 26.7457 36.541C26.5973 36.2402 26.5172 35.9062 26.5055 35.5391H27.6129C27.648 35.8047 27.7203 36.041 27.8297 36.248C27.9391 36.4512 28.0797 36.623 28.2516 36.7637C28.4234 36.9082 28.6207 37.0176 28.8434 37.0918C29.0699 37.1621 29.316 37.1973 29.5816 37.1973C29.7926 37.1973 29.9996 37.1719 30.2027 37.1211C30.4098 37.0664 30.5934 36.9824 30.7535 36.8691C30.9137 36.7598 31.0445 36.6211 31.1461 36.4531C31.2477 36.2812 31.2984 36.0781 31.2984 35.8438ZM37.8832 32.8145L39.723 29.4688H41.0004L38.5219 33.6992L41.059 38H39.7934L37.9066 34.5898L36.0141 38H34.7309L37.2738 33.6992L34.7953 29.4688H36.0668L37.8832 32.8145Z" />
							<rect x="0.5" y="0.5" width="49" height="65.1538" rx="3.5" />
						</svg>
					)
				} else if (extension === EFileItemExtension.zip) {
					return (
						<svg viewBox="0 0 50 67">
							<path d="M14.9043 37.0801H19.3223V38H13.6797L13.668 37.1562L17.916 30.3945H13.7441V29.4688H19.1523L19.1641 30.2949L14.9043 37.0801ZM22.4266 29.4688H27.5828V30.4121H25.5379V37.0625H27.5828V38H22.4266V37.0625H24.4246V30.4121H22.4266V29.4688ZM32.0172 34.5781V38H30.9332V29.4688H33.6988C34.0816 29.4766 34.443 29.5371 34.7828 29.6504C35.1266 29.7637 35.4273 29.9277 35.6852 30.1426C35.943 30.3574 36.1461 30.623 36.2945 30.9395C36.4469 31.2559 36.523 31.6191 36.523 32.0293C36.523 32.4395 36.4469 32.8027 36.2945 33.1191C36.1461 33.4316 35.943 33.6953 35.6852 33.9102C35.4273 34.125 35.1266 34.2891 34.7828 34.4023C34.443 34.5156 34.0816 34.5742 33.6988 34.5781H32.0172ZM32.0172 33.6875H33.6988C33.9488 33.6836 34.1793 33.6445 34.3902 33.5703C34.6012 33.4922 34.7848 33.3828 34.941 33.2422C35.0973 33.1016 35.2184 32.9316 35.3043 32.7324C35.3941 32.5293 35.4391 32.2988 35.4391 32.041C35.4391 31.7832 35.3941 31.5508 35.3043 31.3438C35.2184 31.1367 35.0992 30.9609 34.9469 30.8164C34.7906 30.6719 34.6051 30.5605 34.3902 30.4824C34.1793 30.4043 33.9488 30.3633 33.6988 30.3594H32.0172V33.6875Z" />
							<rect x="0.5" y="0.5" width="49" height="65.1538" rx="3.5" />
						</svg>
					)
				} else if (extension === EFileItemExtension.rar) {
					return (
						<svg viewBox="0 0 50 67">
							<path d="M16.8438 34.5195H15.1387V38H14.0605V29.4688H16.5625C16.9609 29.4766 17.3359 29.5332 17.6875 29.6387C18.0391 29.7441 18.3477 29.9023 18.6133 30.1133C18.875 30.3242 19.0801 30.5898 19.2285 30.9102C19.3809 31.2266 19.457 31.5996 19.457 32.0293C19.457 32.3066 19.416 32.5605 19.334 32.791C19.2559 33.0215 19.1465 33.2305 19.0059 33.418C18.8652 33.6055 18.6973 33.7715 18.502 33.916C18.3066 34.0605 18.0918 34.1836 17.8574 34.2852L19.668 37.9297L19.6621 38H18.5195L16.8438 34.5195ZM15.1387 33.6289H16.5918C16.834 33.625 17.0625 33.5879 17.2773 33.5176C17.4922 33.4434 17.6816 33.3379 17.8457 33.2012C18.0059 33.0645 18.1328 32.8984 18.2266 32.7031C18.3203 32.5039 18.3672 32.2754 18.3672 32.0176C18.3672 31.7441 18.3223 31.5059 18.2324 31.3027C18.1426 31.0957 18.0176 30.9219 17.8574 30.7812C17.6973 30.6445 17.5059 30.541 17.2832 30.4707C17.0645 30.4004 16.8242 30.3633 16.5625 30.3594H15.1387V33.6289ZM26.4988 35.791H23.6512L22.9656 38H21.8816L24.6355 29.4688H25.5437L28.2508 38H27.1727L26.4988 35.791ZM23.9441 34.8477H26.2117L25.0867 31.1445L23.9441 34.8477ZM33.6578 34.5195H31.9527V38H30.8746V29.4688H33.3766C33.775 29.4766 34.15 29.5332 34.5016 29.6387C34.8531 29.7441 35.1617 29.9023 35.4273 30.1133C35.6891 30.3242 35.8941 30.5898 36.0426 30.9102C36.1949 31.2266 36.2711 31.5996 36.2711 32.0293C36.2711 32.3066 36.2301 32.5605 36.148 32.791C36.0699 33.0215 35.9605 33.2305 35.8199 33.418C35.6793 33.6055 35.5113 33.7715 35.316 33.916C35.1207 34.0605 34.9059 34.1836 34.6715 34.2852L36.482 37.9297L36.4762 38H35.3336L33.6578 34.5195ZM31.9527 33.6289H33.4059C33.648 33.625 33.8766 33.5879 34.0914 33.5176C34.3062 33.4434 34.4957 33.3379 34.6598 33.2012C34.8199 33.0645 34.9469 32.8984 35.0406 32.7031C35.1344 32.5039 35.1812 32.2754 35.1812 32.0176C35.1812 31.7441 35.1363 31.5059 35.0465 31.3027C34.9566 31.0957 34.8316 30.9219 34.6715 30.7812C34.5113 30.6445 34.3199 30.541 34.0973 30.4707C33.8785 30.4004 33.6383 30.3633 33.3766 30.3594H31.9527V33.6289Z" />
							<rect x="0.5" y="0.5" width="49" height="65.1538" rx="3.5" />
						</svg>
					)
				} else if (extension === EFileItemExtension.txt) {
					return (
						<svg viewBox="0 0 50 67">
							<path d="M19.7734 30.3945H17.1367V38H16.082V30.3945H13.4453V29.4688H19.7734V30.3945ZM25.0691 32.8145L26.909 29.4688H28.1863L25.7078 33.6992L28.2449 38H26.9793L25.0926 34.5898L23.2 38H21.9168L24.4598 33.6992L21.9812 29.4688H23.2527L25.0691 32.8145ZM36.5875 30.3945H33.9508V38H32.8961V30.3945H30.2594V29.4688H36.5875V30.3945Z" />
							<rect x="0.5" y="0.5" width="49" height="65.1538" rx="3.5" />
						</svg>
					)
				} else {
					return (
						<svg viewBox="0 0 50 67">
							<path d="M14.7656 34.2324H11.2148V38H10.1191V29.4688H15.3574V30.3945H11.2148V33.3125H14.7656V34.2324ZM18.4266 29.4688H23.5828V30.4121H21.5379V37.0625H23.5828V38H18.4266V37.0625H20.4246V30.4121H18.4266V29.4688ZM28.0582 37.0801H32.2301V38H26.9742V29.4688H28.0582V37.0801ZM39.934 34.0566H36.3715V37.0801H40.5258V38H35.2875V29.4688H40.473V30.3945H36.3715V33.1367H39.934V34.0566Z" />
							<rect x="0.5" y="0.5" width="49" height="65.1538" rx="3.5" />
						</svg>
					)
				}
			})()}
			<span
				onFocus={textFocusHandler}
				onBlur={textBlurHandler}
				className={textStyles}
				tabIndex={getTabIndex()}
			>
				{name}.{extension}
			</span>
		</div>
	)
}
